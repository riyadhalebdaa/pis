<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>School Display</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial;background:#fff;overflow:hidden;}

/* LOGO */
.logo-container{
  position:absolute;top:20px;right:30px;
  background:#fff;padding:15px 40px;
  border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,0.08);
  z-index:10;
}
.logo-container img{height:70px;}

/* SLIDER */
.slider{position:fixed;width:100%;height:100%;z-index:-1;}
.slide{
  position:absolute;width:100%;height:100%;
  object-fit:cover;opacity:0;
  transition:opacity 1.5s ease-in-out;
}
.slide.active{opacity:1;}

/* CLOCK */
.clock{
  position:absolute;
  top:40px;
  left:40px;
  width:240px;
  height:240px;
  border-radius:50%;

  background:rgba(255,255,255,0.50);
  backdrop-filter: blur(6px);

  border:6px solid rgba(0,0,0,0.75);
  box-shadow:
    0 0 0 6px rgba(255,255,255,0.6),
    0 15px 35px rgba(0,0,0,0.25);

  display:flex;
  justify-content:center;
  align-items:center;
}

/* Ù…Ø±ÙƒØ² Ø§Ù„Ø³Ø§Ø¹Ø© */
.center{
  position:absolute;
  width:16px;
  height:16px;
  background:#000;
  border-radius:50%;
  z-index:10;
}

.clock-logo{
  position:absolute;
  width:50px;              /* Ø­Ø¬Ù… Ø§Ù„Ù„ÙˆØ¬Ùˆ */
  opacity:1;            /* Ø§Ù„Ø´ÙØ§ÙÙŠØ© */
  z-index:2;               /* Ø¨ÙŠÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø¨ */
  top:30%;
  left:50%;
  transform:translate(-50%,-50%);
  pointer-events:none;     /* Ù…Ø§ ÙŠØ£Ø«Ø±Ø´ Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ø¬Ø© */
}


/* Ø§Ù„Ø¹Ù‚Ø§Ø±Ø¨ */
.hand{
  position:absolute;
  bottom:50%;
  transform-origin:bottom;
  border-radius:10px;
  z-index:5;   /* Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø§Ù„Ù„ÙˆØ¬Ùˆ */
}

.hour{
  width:7px;
  height:65px;
  background:#111;
}

.minute{
  width:4px;
  height:95px;
  background:#333;
}

.second{
  width:2px;
  height:105px;
  background:#d40000;
}
.number{
  position:absolute;
  font-size:22px;
  font-weight:500;
  color:#111;
  transform:translate(-50%,-50%);
  font-family:"Arial", sans-serif;
  z-index:6;
}

.number.bold{
  font-weight:800;
  font-size:29px;
}
.tick{
  position:absolute;
  width:3px;
  height:7px;
  background:#222;
  top:5px;
  left:49%;
  transform-origin:50% 110px;
}

.tick.small{
  height:3px;
  width:2px;
  background:#555;
}


/* STATUS */
.status{
  position:absolute;bottom:40px;right:40px;
  background:rgba(255,255,255,0.95);
  padding:18px 35px;border-radius:15px;
  font-size:22px;font-weight:bold;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
  display:none;line-height:1.8;direction: rtl;
  text-align: right;
}

/* OVERLAY WITH ZOOM */
.overlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.65);

  display:flex;
  justify-content:center;
  align-items:center;

  color:#fff;
  font-size:46px;
  font-weight:bold;

  padding:40px;

  opacity:0;
  visibility:hidden;
  transition:opacity 0.6s ease;
  z-index:999;
}

.overlay-content{
  direction:rtl;
  text-align:right;
  transform:scale(0.8);
  opacity:0;
  transition:transform 0.6s ease, opacity 0.6s ease;
}

.overlay.show{
  opacity:1;
  visibility:visible;
}

.overlay.show .overlay-content{
  transform:scale(1);
  opacity:1;
}

.overlay.hide .overlay-content{
  transform:scale(0.6);
  opacity:0;
}

</style>
</head>
<body>

<div class="logo-container">
  <img src="logo.png">
</div>

<div class="slider" id="slider"></div>

<div class="clock">
  <img src="logo_without_texts.png" class="clock-logo">

  <div class="hand hour"></div>
  <div class="hand minute"></div>
  <div class="hand second"></div>
  <div class="center"></div>
</div>

<div class="status" id="statusBox"></div>
<div class="overlay" id="overlay"></div>

<audio id="bell"></audio>
<script>
const bell = document.getElementById("bell");

/* ğŸ”“ ÙÙƒ Ù‚ÙÙ„ Ø§Ù„ØµÙˆØª Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ„Ù…Ø³ Ø§Ù„Ø´Ø§Ø´Ø© */
function unlockAudio(){
  bell.play().then(()=>{
    bell.pause();
    bell.currentTime = 0;
  }).catch(()=>{});

  document.removeEventListener("click", unlockAudio);
  document.removeEventListener("touchstart", unlockAudio);
}

document.addEventListener("click", unlockAudio);
document.addEventListener("touchstart", unlockAudio);
</script>

<script>

/* CLOCK */
const hour=document.querySelector(".hour");
const minute=document.querySelector(".minute");
const second=document.querySelector(".second");

/* CLOCK NUMBERS */
const clock=document.querySelector(".clock");

const arabicNumbers=["Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©","Ù¡Ù ","Ù¡Ù¡","Ù¡Ù¢"];

for(let i=1;i<=12;i++){
  const num=document.createElement("div");
  num.classList.add("number");
  
  if([3,6,9,12].includes(i)){
    num.classList.add("bold");
  }

  num.textContent=arabicNumbers[i-1];

  const angle=(i*30)*(Math.PI/180);
  const radius=87; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±ÙƒØ²

  const x=113 + radius*Math.sin(angle);
  const y=116 - radius*Math.cos(angle);

  num.style.left=x+"px";
  num.style.top=y+"px";

  clock.appendChild(num);
}

/* MINUTE TICKS */
for(let i=0;i<60;i++){
  const tick=document.createElement("div");
  tick.classList.add("tick");

  if(i%5!==0){
    tick.classList.add("small");
  }

  tick.style.transform=`rotate(${i*6}deg)`;

  clock.appendChild(tick);
}



function updateClock(){
  const now=new Date();
  const h=now.getHours()%12;
  const m=now.getMinutes();
  const s=now.getSeconds();
  hour.style.transform=`rotate(${(h*30)+(m*0.5)}deg)`;
  minute.style.transform=`rotate(${m*6}deg)`;
  second.style.transform=`rotate(${s*6}deg)`;
}
setInterval(updateClock,1000);updateClock();

/* UTIL */
function toMin(t){
  const [h,m]=t.split(":").map(Number);
  return h*60+m;
}

/* SCHEDULE */
const schedule=[
 {name:"Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",start:"03:15",end:"03:16", sound:"00.mp3"},
 {name:"Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",start:"03:16",end:"03:17", sound:"01.mp3"},
 {name:"Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù„Ø«Ø©",start:"03:17",end:"03:18", sound:"02.mp3"},
 {name:"Ø§Ù„Ø­ØµØ© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©",start:"03:18",end:"03:19", sound:"03.mp3"},
 {name:"Ø§Ù„Ø­ØµØ© Ø§Ù„Ø®Ø§Ù…Ø³Ø©",start:"03:20",end:"03:21", sound:"04.mp3"},
 {name:"Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©",start:"03:21",end:"03:22", sound:"05.mp3"},
 {name:"Ø£Ø¯Ø§Ø¡ ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±",start:"03:22",end:"03:23", sound:"06.mp3"}
];

let prevEvent=null;

function getCurrent(arr,current){
  return arr.find(e=>current>=toMin(e.start)&&current<toMin(e.end));
}

function checkSchedule(){
  const now=new Date();
  const current=now.getHours()*60+now.getMinutes();

  const currentEvent=getCurrent(schedule,current);

  const box=document.getElementById("statusBox");

  if(currentEvent){
    box.style.display="block";
    box.innerHTML=`ğŸŸ¢ Ø§Ù„Ø¢Ù† ${currentEvent.name}`;
  }else{
    box.style.display="none";
  }

  const currentName=currentEvent ? currentEvent.name : "";

if(currentEvent && 
   (!prevEvent || prevEvent.name !== currentEvent.name)){
    showTransition(prevEvent,currentEvent);
  }

  prevEvent=currentEvent || null;
}


function showTransition(oldEvent,newEvent){

  const overlay=document.getElementById("overlay");
  const bell=document.getElementById("bell");

  if(!newEvent) return;

  let message="";

  /* ğŸ”¹ Ù„Ùˆ ÙÙŠÙ‡ Ø­ØµØ© Ù‚Ø¨Ù„Ù‡Ø§ */
  if(oldEvent && oldEvent.name !== newEvent.name){
    message =
      `ğŸŸ¢ Ø§Ù†ØªÙ‡Øª ${oldEvent.name}<br>
       ÙˆØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ${newEvent.name}`;
  }
  /* ğŸ”¹ Ù„Ùˆ Ø¯ÙŠ Ø£ÙˆÙ„ Ø­ØµØ© ÙÙŠ Ø§Ù„ÙŠÙˆÙ… */
  else if(!oldEvent){
    message =
      `ğŸŸ¢ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ${newEvent.name}`;
  }
  else{
    return;
  }

  overlay.innerHTML=`<div class="overlay-content">${message}</div>`;

  overlay.classList.remove("hide");
  overlay.classList.add("show");

  /* ğŸ”” ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„Ù…Ø­Ø¯Ø¯ */
if(newEvent.sound){
  bell.src = `audio/${newEvent.sound}`;
  bell.muted = false;
  bell.currentTime = 0;

  bell.play().catch(e => console.log("Audio blocked:", e));
}

  setTimeout(()=>{
    overlay.classList.add("hide");

    setTimeout(()=>{
      overlay.classList.remove("show","hide");
    },600);

  },10000);
}


setInterval(checkSchedule,1000);
checkSchedule();

/* SLIDER */
const slider=document.getElementById("slider");
let slides=[],currentSlide=0;
for(let i=1;i<=300;i++){
  let img=document.createElement("img");
  img.src=`preimg/Slide${i}.JPG`;
  img.classList.add("slide");
  slider.appendChild(img);
  slides.push(img);
}
slides[0].classList.add("active");
setInterval(()=>{
  slides[currentSlide].classList.remove("active");
  currentSlide=(currentSlide+1)%slides.length;
  slides[currentSlide].classList.add("active");
},5000);

</script>
</body>
</html>